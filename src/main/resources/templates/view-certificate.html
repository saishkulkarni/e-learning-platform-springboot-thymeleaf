<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      type="image/x-icon"
      href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iIzY0ZmZkYSIvPgo8cGF0aCBkPSJNOCA4aDEydjJIOHptMCA0aDEwdjJIOHptMCA0aDh2Mkg4eiIgZmlsbD0iIzFhMWExYSIvPgo8L3N2Zz4K"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <title>View Certificate - CodeVeda</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Quicksand", sans-serif;
        background-color: #1a1a1a;
        color: #e0e0e0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      header {
        background-color: #2d2d2d;
        color: #ffffff;
        padding: 12px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-radius: 0 0 15px 15px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }
      .logo {
        font-size: 20px;
        font-weight: 700;
        text-decoration: none;
        color: #64ffda;
        letter-spacing: 1px;
      }
      .logo:hover {
        color: #4fd3b8;
      }
      nav a {
        background-color: #3d3d3d;
        color: #ffffff;
        text-decoration: none;
        margin-left: 12px;
        padding: 6px 16px;
        border-radius: 20px;
        font-weight: 500;
        font-size: 13px;
        border: 2px solid #555555;
        transition: all 0.3s ease;
      }
      nav a:hover {
        background-color: #64ffda;
        color: #1a1a1a;
        border-color: #64ffda;
      }
      .hero {
        background: linear-gradient(135deg, #2d2d2d 0%, #3d3d3d 100%);
        color: #ffffff;
        padding: 15px 20px;
        text-align: center;
        border-radius: 15px;
        margin: 10px 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
        border: 1px solid #444444;
      }
      .hero h1 {
        font-size: 20px;
        font-weight: 700;
        margin-bottom: 5px;
        color: #64ffda;
      }
      .hero p {
        font-size: 12px;
        font-weight: 400;
        max-width: 400px;
        margin: 0 auto;
        line-height: 1.3;
        color: #b0b0b0;
      }
      .main-content {
        flex: 1;
        padding: 15px 20px;
        overflow-y: auto;
      }
      .certificate-container {
        max-width: 900px;
        margin: 0 auto;
      }
      .certificate-card {
        background: linear-gradient(135deg, #2d2d2d 0%, #3a3a3a 100%);
        border: 1px solid #444444;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        padding: 30px;
        margin-bottom: 20px;
        position: relative;
        overflow: hidden;
        animation: slideInUp 0.6s ease-out;
      }
      .certificate-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #64ffda, #4fd3b8, #64ffda);
      }
      .certificate-header {
        text-align: center;
        margin-bottom: 25px;
        padding-bottom: 20px;
        border-bottom: 1px solid #555555;
      }
      .certificate-title {
        font-size: 24px;
        font-weight: 700;
        color: #64ffda;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }
      .certificate-subtitle {
        color: #b0b0b0;
        font-size: 14px;
        font-weight: 400;
      }
      .certificate-body {
        background: linear-gradient(
          135deg,
          rgba(100, 255, 218, 0.02) 0%,
          rgba(79, 211, 184, 0.02) 100%
        );
        border: 2px solid #555555;
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 25px;
      }
      .certificate-details {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
      }
      .detail-item {
        background: #3d3d3d;
        border: 1px solid #555555;
        border-radius: 10px;
        padding: 15px;
        transition: all 0.3s ease;
      }
      .detail-item:hover {
        border-color: #64ffda;
        transform: translateY(-1px);
      }
      .detail-label {
        color: #64ffda;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .detail-value {
        color: #e0e0e0;
        font-size: 14px;
        font-weight: 600;
        line-height: 1.3;
      }
      .certificate-signature {
        text-align: center;
        padding: 20px;
        border-top: 1px solid #555555;
        margin-top: 20px;
      }
      .signature-text {
        color: #b0b0b0;
        font-size: 12px;
        font-style: italic;
        margin-bottom: 10px;
      }
      .signature-line {
        width: 200px;
        height: 1px;
        background: #555555;
        margin: 0 auto 8px;
      }
      .signature-name {
        color: #64ffda;
        font-size: 13px;
        font-weight: 600;
      }
      .button-group {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 25px;
        flex-wrap: wrap;
      }
      .btn {
        padding: 12px 20px;
        border: none;
        border-radius: 12px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        font-family: "Quicksand", sans-serif;
      }
      .btn-primary {
        background-color: #4caf50;
        color: white;
      }
      .btn-primary:hover {
        background-color: #45a049;
        transform: translateY(-1px);
        text-decoration: none;
        color: white;
      }
      .btn-secondary {
        background-color: #6c757d;
        color: white;
      }
      .btn-secondary:hover {
        background-color: #5a6268;
        transform: translateY(-1px);
        text-decoration: none;
        color: white;
      }
      .btn-info {
        background-color: #17a2b8;
        color: white;
      }
      .btn-info:hover {
        background-color: #138496;
        transform: translateY(-1px);
        text-decoration: none;
        color: white;
      }
      .certificate-id {
        text-align: center;
        margin-top: 20px;
        padding-top: 15px;
        border-top: 1px solid #555555;
      }
      .id-label {
        color: #888888;
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 5px;
      }
      .id-value {
        color: #64ffda;
        font-size: 12px;
        font-weight: 600;
        font-family: monospace;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .id-value:hover {
        color: #4fd3b8;
        transform: scale(1.05);
      }
      footer {
        background-color: #2d2d2d;
        color: #ffffff;
        text-align: center;
        padding: 10px;
        border-radius: 15px 15px 0 0;
        font-weight: 500;
        border-top: 1px solid #444444;
        font-size: 12px;
        margin-top: auto;
      }
      .alert {
        position: fixed;
        top: 15px;
        right: 15px;
        padding: 10px 14px;
        border-radius: 10px;
        color: white;
        min-width: 250px;
        z-index: 1000;
        font-family: "Quicksand", sans-serif;
        font-weight: 500;
        font-size: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
      }
      .alert-success {
        background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
        border: 2px solid #4caf50;
      }
      .alert-error {
        background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
        border: 2px solid #f44336;
      }
      .alert-close {
        float: right;
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        font-size: 14px;
        cursor: pointer;
        margin-left: 10px;
        padding: 3px 6px;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
      }
      .alert-close:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
      }
      .info-content {
        padding: 0;
      }
      .info-item {
        background-color: #3d3d3d;
        border: 1px solid #555555;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 12px;
        transition: all 0.3s ease;
      }
      .info-item:hover {
        background-color: #404040;
        border-color: #64ffda;
      }
      .info-item:last-child {
        margin-bottom: 0;
      }
      .info-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
        color: #64ffda;
        font-weight: 600;
        font-size: 13px;
      }
      .info-item p {
        color: #b0b0b0;
        font-size: 12px;
        line-height: 1.4;
        margin: 0;
      }
      .info-item i {
        font-size: 14px;
      }
      .verification-content {
        padding: 0;
      }
      .verification-item {
        background-color: #3d3d3d;
        border: 1px solid #555555;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 12px;
        transition: all 0.3s ease;
      }
      .verification-item:hover {
        background-color: #404040;
        border-color: #64ffda;
      }
      .verification-item:last-child {
        margin-bottom: 0;
      }
      .verification-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
        color: #64ffda;
        font-weight: 600;
        font-size: 13px;
      }
      .verification-item p {
        color: #b0b0b0;
        font-size: 12px;
        line-height: 1.4;
        margin: 0;
      }
      .verification-item strong {
        color: #64ffda;
        font-weight: 600;
      }
      .verification-item i {
        font-size: 14px;
      }
      /* Animation for certificate appearance */
      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      /* Certificate watermark */
      .certificate-watermark {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-45deg);
        font-size: 80px;
        color: rgba(100, 255, 218, 0.03);
        font-weight: 900;
        pointer-events: none;
        z-index: 0;
      }
      .certificate-body {
        position: relative;
        z-index: 1;
      }
      /* Share functionality */
      .share-section {
        text-align: center;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #555555;
      }
      .share-title {
        color: #64ffda;
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 10px;
      }
      .share-buttons {
        display: flex;
        justify-content: center;
        gap: 10px;
        flex-wrap: wrap;
      }
      .share-btn {
        padding: 8px 12px;
        border: 1px solid #555555;
        border-radius: 8px;
        background: #3d3d3d;
        color: #e0e0e0;
        text-decoration: none;
        font-size: 12px;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 5px;
      }
      .share-btn:hover {
        background: #64ffda;
        color: #1a1a1a;
        border-color: #64ffda;
        text-decoration: none;
      }
      /* Responsive Design */
      @media (max-width: 768px) {
        .certificate-details {
          grid-template-columns: 1fr;
          gap: 15px;
        }
        .certificate-card {
          padding: 20px;
          margin: 10px;
        }
        .certificate-title {
          font-size: 20px;
        }
        .button-group {
          flex-direction: column;
          align-items: center;
        }
        .btn {
          width: 100%;
          max-width: 250px;
        }
        .share-buttons {
          flex-direction: column;
          align-items: center;
        }
        .share-btn {
          width: 100%;
          max-width: 200px;
          justify-content: center;
        }
      }
      /* Print Styles */
      @media print {
        body {
          background-color: white;
          color: black;
        }
        header,
        footer,
        .button-group,
        .share-section,
        .alert {
          display: none !important;
        }
        .certificate-container {
          max-width: none;
        }
        .certificate-card:not(:first-child) {
          display: none !important;
        }
        .certificate-card {
          margin: 0;
          padding: 40px;
          border-radius: 0;
          background: white;
          border: 2px solid #000;
          box-shadow: none;
          page-break-inside: avoid;
        }
        .certificate-card::before {
          background: #000;
        }
        .certificate-title,
        .detail-label,
        .signature-name,
        .id-value {
          color: #000 !important;
        }
        .detail-item,
        .certificate-body {
          background: #f9f9f9;
          border-color: #ccc;
        }
        .certificate-title {
          font-size: 28px;
        }
        .detail-value {
          font-size: 16px;
        }
        .signature-name {
          font-size: 16px;
        }
        .certificate-watermark {
          color: rgba(0, 0, 0, 0.05);
        }
      }
      /* Font Awesome Icons */
      .fas {
        font-family: "Font Awesome 6 Free";
        font-weight: 900;
      }
      .fa-certificate:before {
        content: "\f0a3";
      }
      .fa-user:before {
        content: "\f007";
      }
      .fa-graduation-cap:before {
        content: "\f19d";
      }
      .fa-calendar:before {
        content: "\f073";
      }
      .fa-id-card:before {
        content: "\f2c2";
      }
      .fa-download:before {
        content: "\f019";
      }
      .fa-share:before {
        content: "\f064";
      }
      .fa-copy:before {
        content: "\f0c5";
      }
      .fa-check:before {
        content: "\f00c";
      }
      .fa-exclamation:before {
        content: "\f12a";
      }
      .fa-shield-alt:before {
        content: "\f3ed";
      }
      .fa-external-link-alt:before {
        content: "\f35d";
      }
      .fa-linkedin:before {
        content: "\f08c";
      }
      .fa-twitter:before {
        content: "\f099";
      }
      .fa-facebook:before {
        content: "\f09a";
      }
    </style>
  </head>
  <body>
    <!-- Toast Container -->
    <div th:if="${session.pass}" class="alert alert-success" id="successAlert">
      <span th:text="${session.pass}">Success message</span>
      <button class="alert-close" onclick="closeAlert('successAlert')">
        &times;
      </button>
    </div>
    <div th:if="${session.fail}" class="alert alert-error" id="errorAlert">
      <span th:text="${session.fail}">Error message</span>
      <button class="alert-close" onclick="closeAlert('errorAlert')">
        &times;
      </button>
    </div>
    <th:block th:text="${@generalService.removeMessage()}"></th:block>

    <!-- Header -->
    <header>
      <a href="/learner/home" class="logo">CodeVeda</a>
      <nav>
        <a href="/learner/enrolled-courses">My Courses</a>
        <a href="/learner/home">Dashboard</a>
        <a href="/logout">Logout</a>
      </nav>
    </header>

    <!-- Hero Section -->
    <div class="hero">
      <h1><i class="fas fa-certificate"></i> Certificate of Completion</h1>
      <p>
        Official course completion certificate - Digitally verified and
        authenticated
      </p>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="certificate-container">
        <!-- Main Certificate Card -->
        <div class="certificate-card">
          <!-- Certificate Watermark -->
          <div class="certificate-watermark">CodeVeda</div>

          <!-- Certificate Header -->
          <div class="certificate-header">
            <h2 class="certificate-title">
              <i class="fas fa-certificate"></i>
              Certificate of Completion
            </h2>
            <p class="certificate-subtitle">
              This certifies that the student has successfully completed the
              course
            </p>
          </div>

          <!-- Certificate Body -->
          <div class="certificate-body">
            <div class="certificate-details">
              <div class="detail-item">
                <div class="detail-label">
                  <i class="fas fa-user"></i>
                  Student Name
                </div>
                <div class="detail-value" th:text="${certificate.learner.name}">
                  Student Name
                </div>
              </div>
              <div class="detail-item">
                <div class="detail-label">
                  <i class="fas fa-graduation-cap"></i>
                  Course Title
                </div>
                <div class="detail-value" th:text="${certificate.course.title}">
                  Course Name
                </div>
              </div>
              <div class="detail-item">
                <div class="detail-label">
                  <i class="fas fa-calendar"></i>
                  Completion Date
                </div>
                <div class="detail-value" th:text="${certificate.issueDate}">
                  Completion Date
                </div>
              </div>
              <div class="detail-item">
                <div class="detail-label">
                  <i class="fas fa-id-card"></i>
                  Certificate ID
                </div>
                <div
                  class="detail-value"
                  th:text="${certificate.id}"
                  onclick="copyToClipboard(this.textContent)"
                >
                  Certificate ID
                </div>
              </div>
            </div>

            <!-- Certificate Signature -->
            <div class="certificate-signature">
              <p class="signature-text">Digitally signed and verified by</p>
              <div class="signature-line"></div>
              <p class="signature-name">CodeVeda E-Learning Platform</p>
            </div>
          </div>

          <!-- Certificate ID Footer -->
          <div class="certificate-id">
            <div class="id-label">Verification ID</div>
            <div
              class="id-value"
              th:text="${certificate.id}"
              onclick="copyToClipboard(this.textContent)"
              title="Click to copy"
            >
              CERT-2025-001
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="button-group">
            <button
              class="btn btn-primary"
              onclick="window.print()"
              title="Download/Print Certificate"
            >
              <i class="fas fa-download"></i>
              <span>Download Certificate</span>
            </button>
            <button
              class="btn btn-info"
              onclick="copyShareLink()"
              title="Copy shareable link"
            >
              <i class="fas fa-share"></i>
              <span>Share Certificate</span>
            </button>
            <a
              href="/learner/enrolled-courses"
              class="btn btn-secondary"
              title="Back to courses"
            >
              <i class="fas fa-graduation-cap"></i>
              <span>My Courses</span>
            </a>
          </div>

          <!-- Share Section -->
          <div class="share-section">
            <div class="share-title">Share Your Achievement</div>
            <div class="share-buttons">
              <a
                href="#"
                class="share-btn"
                onclick="shareOnLinkedIn()"
                title="Share on LinkedIn"
              >
                <i class="fab fa-linkedin"></i>
                <span>LinkedIn</span>
              </a>
              <a
                href="#"
                class="share-btn"
                onclick="shareOnTwitter()"
                title="Share on Twitter"
              >
                <i class="fab fa-twitter"></i>
                <span>Twitter</span>
              </a>
              <a
                href="#"
                class="share-btn"
                onclick="copyShareLink()"
                title="Copy link"
              >
                <i class="fas fa-copy"></i>
                <span>Copy Link</span>
              </a>
            </div>
          </div>
        </div>

        <!-- Certificate Information Card -->
        <div class="certificate-card">
          <div class="certificate-header">
            <h3 class="certificate-title">
              <i class="fas fa-shield-alt"></i>
              Certificate Information
            </h3>
          </div>
          <div class="info-content">
            <div class="info-item">
              <div class="info-header">
                <i class="fas fa-certificate"></i>
                <span>Authenticity</span>
              </div>
              <p>
                This certificate is digitally signed and can be verified using
                the certificate ID provided above. It represents genuine
                completion of the specified course on CodeVeda platform.
              </p>
            </div>
            <div class="info-item">
              <div class="info-header">
                <i class="fas fa-graduation-cap"></i>
                <span>Course Completion</span>
              </div>
              <p>
                The student has successfully completed all course sections,
                passed all assessments, and achieved the final quiz with the
                required minimum score of 80%.
              </p>
            </div>
            <div class="info-item">
              <div class="info-header">
                <i class="fas fa-download"></i>
                <span>Download & Print</span>
              </div>
              <p>
                You can download this certificate as a PDF by clicking the
                download button above. The certificate is optimized for printing
                on standard A4 paper.
              </p>
            </div>
            <div class="info-item">
              <div class="info-header">
                <i class="fas fa-share"></i>
                <span>Share Achievement</span>
              </div>
              <p>
                Share your achievement on professional networks like LinkedIn or
                social media platforms. Use the share buttons to quickly post
                about your course completion.
              </p>
            </div>
          </div>
        </div>

        <!-- Verification Card -->
        <div class="certificate-card">
          <div class="certificate-header">
            <h3 class="certificate-title">
              <i class="fas fa-shield-alt"></i>
              Certificate Verification
            </h3>
          </div>
          <div class="verification-content">
            <div class="verification-item">
              <div class="verification-header">
                <i class="fas fa-id-card"></i>
                <span>Verification Process</span>
              </div>
              <p>
                To verify this certificate, use the Certificate ID:
                <strong th:text="${certificate.id}">CERT-ID</strong>
                Anyone can verify the authenticity of this certificate using
                this unique identifier.
              </p>
            </div>
            <div class="verification-item">
              <div class="verification-header">
                <i class="fas fa-check"></i>
                <span>Digital Signature</span>
              </div>
              <p>
                This certificate contains a digital signature that ensures its
                authenticity and prevents tampering. The signature is generated
                using CodeVeda's secure certificate system.
              </p>
            </div>
            <div class="verification-item">
              <div class="verification-header">
                <i class="fas fa-calendar"></i>
                <span>Validity & Recognition</span>
              </div>
              <p>
                This certificate is valid indefinitely and represents the
                successful completion of the specified course. It demonstrates
                the holder's knowledge and skills in the subject matter.
              </p>
            </div>
            <div class="verification-item">
              <div class="verification-header">
                <i class="fas fa-external-link-alt"></i>
                <span>Online Verification</span>
              </div>
              <p>
                Employers and institutions can verify this certificate online by
                visiting CodeVeda's verification portal and entering the
                certificate ID provided above.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer>&copy; 2025 CodeVeda. All rights reserved.</footer>

    <script>
      function closeAlert(alertId) {
        document.getElementById(alertId).style.display = "none";
      }

      setTimeout(function () {
        var successAlert = document.getElementById("successAlert");
        var errorAlert = document.getElementById("errorAlert");
        if (successAlert) {
          successAlert.style.display = "none";
        }
        if (errorAlert) {
          errorAlert.style.display = "none";
        }
      }, 5000);

      // Copy to clipboard functionality
      function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(
          function () {
            showNotification("Certificate ID copied to clipboard!", "success");
          },
          function (err) {
            // Fallback for older browsers
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand("copy");
            document.body.removeChild(textArea);
            showNotification("Certificate ID copied to clipboard!", "success");
          }
        );
      }

      // Copy share link functionality
      function copyShareLink() {
        const shareUrl = window.location.href;
        navigator.clipboard.writeText(shareUrl).then(
          function () {
            showNotification(
              "Certificate link copied to clipboard!",
              "success"
            );
          },
          function (err) {
            // Fallback for older browsers
            const textArea = document.createElement("textarea");
            textArea.value = shareUrl;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand("copy");
            document.body.removeChild(textArea);
            showNotification(
              "Certificate link copied to clipboard!",
              "success"
            );
          }
        );
      }

      // Social media sharing functions
      function shareOnLinkedIn() {
        const certificateUrl = window.location.href;
        const courseName =
          document.querySelector(".detail-value").textContent || "Course";
        const text = `I just completed "${courseName}" on CodeVeda! Check out my certificate:`;
        const linkedInUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(
          certificateUrl
        )}&title=${encodeURIComponent(text)}`;
        window.open(linkedInUrl, "_blank", "width=600,height=400");
      }

      function shareOnTwitter() {
        const certificateUrl = window.location.href;
        const courseName =
          document.querySelector(".detail-value").textContent || "Course";
        const text = `I just completed "${courseName}" on @CodeVeda! 🎓 Check out my certificate: ${certificateUrl} #CodeVeda #Learning #Certificate`;
        const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(
          text
        )}`;
        window.open(twitterUrl, "_blank", "width=600,height=400");
      }

      function shareOnFacebook() {
        const certificateUrl = window.location.href;
        const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(
          certificateUrl
        )}`;
        window.open(facebookUrl, "_blank", "width=600,height=400");
      }

      // Show notification function
      function showNotification(message, type = "success") {
        // Remove existing notifications
        const existingNotifications =
          document.querySelectorAll(".notification");
        existingNotifications.forEach((notification) => notification.remove());

        // Create new notification
        const notification = document.createElement("div");
        notification.className = `notification notification-${type}`;
        notification.style.cssText = `
          position: fixed;
          top: 80px;
          right: 20px;
          background: ${type === "success" ? "#4caf50" : "#f44336"};
          color: white;
          padding: 12px 20px;
          border-radius: 8px;
          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
          z-index: 1001;
          font-family: "Quicksand", sans-serif;
          font-weight: 500;
          font-size: 14px;
          animation: slideInRight 0.3s ease-out;
          max-width: 300px;
        `;

        notification.innerHTML = `
          <div style="display: flex; align-items: center; gap: 8px;">
            <i class="fas fa-${
              type === "success" ? "check" : "exclamation-triangle"
            }"></i>
            <span>${message}</span>
          </div>
        `;

        document.body.appendChild(notification);

        // Auto remove after 3 seconds
        setTimeout(() => {
          notification.style.animation = "slideOutRight 0.3s ease-in";
          setTimeout(() => notification.remove(), 300);
        }, 3000);
      }

      // Add slide animations for notifications
      const style = document.createElement("style");
      style.textContent = `
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        @keyframes slideOutRight {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(100%);
            opacity: 0;
          }
        }
      `;
      document.head.appendChild(style);

      // Auto-focus on certificate for screen readers
      document.addEventListener("DOMContentLoaded", function () {
        const certificateCard = document.querySelector(".certificate-card");
        if (certificateCard) {
          certificateCard.setAttribute("tabindex", "0");
          certificateCard.focus();
        }

        // Add click-to-copy tooltips
        const copyableElements = document.querySelectorAll(".id-value");
        copyableElements.forEach((element) => {
          element.style.cursor = "pointer";
          element.title = "Click to copy";

          // Add visual feedback on hover
          element.addEventListener("mouseenter", function () {
            this.style.textDecoration = "underline";
          });

          element.addEventListener("mouseleave", function () {
            this.style.textDecoration = "none";
          });
        });
      });

      // Keyboard shortcuts
      document.addEventListener("keydown", function (e) {
        // Ctrl+P or Cmd+P for print
        if ((e.ctrlKey || e.metaKey) && e.key === "p") {
          e.preventDefault();
          window.print();
        }

        // Ctrl+C to copy certificate ID when focused
        if (
          (e.ctrlKey || e.metaKey) &&
          e.key === "c" &&
          e.target.classList.contains("id-value")
        ) {
          e.preventDefault();
          copyToClipboard(e.target.textContent);
        }

        // Ctrl+S to share
        if ((e.ctrlKey || e.metaKey) && e.key === "s") {
          e.preventDefault();
          copyShareLink();
        }

        // Escape key to close
        if (e.key === "Escape") {
          window.close();
        }
      });

      // Enhanced print functionality
      function enhancedPrint() {
        // Hide non-essential elements before printing
        const elementsToHide = document.querySelectorAll(
          ".share-section, .button-group, header, footer"
        );
        elementsToHide.forEach((el) => (el.style.display = "none"));

        // Print
        window.print();

        // Restore elements after printing
        setTimeout(() => {
          elementsToHide.forEach((el) => (el.style.display = ""));
        }, 1000);
      }

      // Certificate validation animation
      function animateValidation() {
        const certificateCard = document.querySelector(".certificate-card");
        certificateCard.style.animation = "pulse 0.6s ease-in-out";

        setTimeout(() => {
          certificateCard.style.animation = "";
        }, 600);
      }

      // Add pulse animation
      const pulseStyle = document.createElement("style");
      pulseStyle.textContent = `
        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.02); }
          100% { transform: scale(1); }
        }
      `;
      document.head.appendChild(pulseStyle);

      // Certificate verification simulation
      function verifyCertificate() {
        showNotification("Verifying certificate...", "info");

        setTimeout(() => {
          showNotification("Certificate verified successfully! ✓", "success");
          animateValidation();
        }, 2000);
      }

      // Add verification button functionality
      document.addEventListener("DOMContentLoaded", function () {
        // Add verification status indicator
        const verificationStatus = document.createElement("div");
        verificationStatus.style.cssText = `
          position: absolute;
          top: 15px;
          left: 15px;
          background: #4caf50;
          color: white;
          padding: 5px 10px;
          border-radius: 15px;
          font-size: 11px;
          font-weight: 600;
          display: flex;
          align-items: center;
          gap: 5px;
        `;
        verificationStatus.innerHTML = '<i class="fas fa-check"></i> VERIFIED';

        const firstCertificateCard =
          document.querySelector(".certificate-card");
        if (firstCertificateCard) {
          firstCertificateCard.style.position = "relative";
          firstCertificateCard.appendChild(verificationStatus);
        }
      });

      // Progressive Web App functionality
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function () {
          navigator.serviceWorker.register("/sw.js").then(
            function (registration) {
              console.log("ServiceWorker registration successful");
            },
            function (err) {
              console.log("ServiceWorker registration failed");
            }
          );
        });
      }

      // Add to home screen prompt
      let deferredPrompt;
      window.addEventListener("beforeinstallprompt", (e) => {
        e.preventDefault();
        deferredPrompt = e;

        // Show install button
        const installButton = document.createElement("button");
        installButton.className = "btn btn-info";
        installButton.innerHTML =
          '<i class="fas fa-mobile-alt"></i> Install App';
        installButton.onclick = () => {
          deferredPrompt.prompt();
          deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === "accepted") {
              console.log("User accepted the install prompt");
            }
            deferredPrompt = null;
            installButton.remove();
          });
        };

        const buttonGroup = document.querySelector(".button-group");
        if (buttonGroup) {
          buttonGroup.appendChild(installButton);
        }
      });

      // Analytics tracking (placeholder)
      function trackCertificateView() {
        // Track certificate view event
        if (typeof gtag !== "undefined") {
          gtag("event", "certificate_view", {
            event_category: "engagement",
            event_label: "certificate_viewed",
          });
        }
      }

      function trackCertificateDownload() {
        // Track certificate download event
        if (typeof gtag !== "undefined") {
          gtag("event", "certificate_download", {
            event_category: "engagement",
            event_label: "certificate_downloaded",
          });
        }
      }

      function trackCertificateShare(platform) {
        // Track certificate share event
        if (typeof gtag !== "undefined") {
          gtag("event", "certificate_share", {
            event_category: "engagement",
            event_label: platform,
          });
        }
      }

      // Initialize tracking
      document.addEventListener("DOMContentLoaded", function () {
        trackCertificateView();

        // Add tracking to existing functions
        const originalPrint = window.print;
        window.print = function () {
          trackCertificateDownload();
          originalPrint.call(window);
        };
      });

      // Accessibility improvements
      document.addEventListener("DOMContentLoaded", function () {
        // Add ARIA labels
        const certificateCard = document.querySelector(".certificate-card");
        if (certificateCard) {
          certificateCard.setAttribute("role", "article");
          certificateCard.setAttribute(
            "aria-label",
            "Certificate of Completion"
          );
        }

        // Add skip link for keyboard navigation
        const skipLink = document.createElement("a");
        skipLink.href = "#main-certificate";
        skipLink.textContent = "Skip to certificate";
        skipLink.style.cssText = `
          position: absolute;
          top: -40px;
          left: 6px;
          background: #64ffda;
          color: #1a1a1a;
          padding: 8px;
          text-decoration: none;
          border-radius: 4px;
          z-index: 1000;
        `;
        skipLink.addEventListener("focus", () => {
          skipLink.style.top = "6px";
        });
        skipLink.addEventListener("blur", () => {
          skipLink.style.top = "-40px";
        });

        document.body.insertBefore(skipLink, document.body.firstChild);

        // Add main certificate ID
        if (certificateCard) {
          certificateCard.id = "main-certificate";
        }
      });

      // Error handling for share functions
      window.addEventListener("error", function (e) {
        console.error("Certificate page error:", e.error);
        showNotification("An error occurred. Please try again.", "error");
      });

      // Online/offline status
      window.addEventListener("online", function () {
        showNotification("Connection restored", "success");
      });

      window.addEventListener("offline", function () {
        showNotification(
          "You are offline. Some features may not work.",
          "error"
        );
      });
    </script>
  </body>
</html>
